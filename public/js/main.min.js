var exe=function(t,e){function i(){function i(t){x.html(S[t]),w.html(l[t])}function n(){u.hide(),b.removeClass("active"),b.addClass("closed"),w.html(B),x.html("請選擇版本"),z=-1,v.hide(),k.hide(),k.text("下一步")}function a(){f.append('<button id="btn-shortcut-download" class="button shortcut closed"><i class="fa fa-cloud-download"></i></button>');t("#btn-shortcut-download")}function o(){"install"==E&&u.hide(),A=!1,h.html('<i class="fa fa-download"></i>&nbspexe.andyteki'),w.html(B),x.html("請選擇版本"),t("#btn-shortcut-download").remove(),u.show(),b.removeClass("closed"),b.addClass("active")}function s(){t(".button-group.bc > button, .button-group.cv > button").click(function(){var i=t(this).attr("id").split("-")[1],n=t(this).attr("id").split("-")[2],a="https://www.dropbox.com/s/38hkgsxyq6hr1pw/BC.pdf?raw=1",o="https://www.dropbox.com/s/ltwoysbpl6rwy33/%E5%B1%A5%E6%AD%B7.pdf?raw=1",s={success:function(){alert("儲存成功!")}};"open"==i?("card"==n&&e.open(a),"cv"==n&&e.open(o)):"dropbox"==i&&("card"==n&&Dropbox.save(a,"名片",s),"cv"==n&&Dropbox.save(o,"履歷",s))})}function c(t){console.log(t)}var l,r,d,u=(t("#desktop"),t("#draggable-window")),h=u.find(".status-bar > .title"),f=t("#menu-bar"),p=t("#btn-start"),b=t("#btn-shortcut-install"),g=t("#btn-minimize"),m=t("#btn-exit"),v=t("#btn-previous"),k=t("#btn-next"),w=(t("#package-list > .package"),t("#body")),x=t("#draggable-window .tasks > .title"),C=t(".postit"),y=t("#start-panel"),D=t("#fb-share"),j=t("#easter > a"),z=-1,B=w.html(),S={},E="install",A=!1;u.draggable({containment:"#desktop",scroll:!1,handle:"div.status-bar"}),C.draggable({containment:"#desktop",scroll:!1}),p.click(function(){y.toggle(),t(this).toggleClass("pressed")}),f.on("click",".button.shortcut",function(){if(E=t(this).attr("id").split("-")[2],A&&"install"==E){var e=confirm("你已成功安裝exe.andyteki，是否重新安裝？");return void(e&&o())}"download"==E&&(h.html('<i class="fa fa-cloud-download"></i>&nbspandyteki'),i(d),s()),u.toggle(),t(this).hasClass("closed")&&t(this).removeClass("closed"),t(this).toggleClass("active")}),g.click(function(){u.hide(),t("#btn-shortcut-"+E).toggleClass("active")}),m.click(function(){if("install"==E){var e=confirm("安裝程式正在進行，確定關閉視窗？");e&&n()}else"download"==E&&(u.hide(),t("#btn-shortcut-"+E).removeClass("active"),t("#btn-shortcut-"+E).addClass("closed"))}),v.click(function(){z>1&&(z--,i(z),k.text("下一步"),1==z&&t(this).hide())}),k.click(function(){if(d-1>z){if(0==z){var e=!!Number(t('input:radio:checked[name="agreement-radio"]').attr("value"));if(!e){var o=prompt("您不同意哪幾個點呢？請填入編號或理由，謝謝！");c(o)}}z++,i(z),z>1&&v.show(),z==d-1&&t(this).text("完成")}else{var s=t("#execution-andyteki").prop("checked");a(),n(),A=!0,s&&t("#btn-shortcut-download").trigger("click")}}),w.on("click","#package-list > .package",function(){var e=t(this).attr("id").replace(/\w+-/,"");"custom"!=e&&(w.html("<h1>Loading...</h1>"),t.ajax({url:"/process",type:"POST",data:{"package":e},success:function(t){z++,l=t;for(var e in l)S[e]=l[e].match(/^<!-{2}\s*(\S+)\s*-{2}>/)[1];d=Object.keys(l).length-1,r=l[d],i(z),k.show()},error:function(){}}))}),D.click(function(t){t.preventDefault(),FB.ui({method:"share",href:e.location.href},function(){})}),j.tooltip()}function n(){t("#btn-next-card").click(function(e){e.preventDefault();var i=t("#working-experience > .hand-with-card > img"),n=i.attr("src"),a=n.match(/(\d).png$/)[1];3>a?a++:a=1,i.addClass("take"),setTimeout(function(){i.attr("src",n.replace(/\d/,a)).load(function(){i.removeClass("take")})},1e3)})}function a(){jQuery("#skills > .skill").accordion({header:".title",collapsible:!0,active:!1,icons:{header:"ui-icon-plus",activeHeader:"ui-icon-minus"},heightStyle:"content"})}function o(){var e=t("#languages > .overlay");t(".language > img").hover(function(){var i=t(this).siblings(".info").text();e.html(i),e.removeClass("hide")},function(){e.addClass("hide")})}return t(document).ready(i),{initializeExperience:n,initializeSkills:a,initializeLanguage:o}}(jQuery,window);