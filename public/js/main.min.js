var exe=function(t,e){function a(){function a(t){v.html(L[t]),m.html(w[t])}function i(){l.hide(),h.removeClass("active"),h.addClass("closed"),m.html($),v.html("請選擇版本"),y=-1,b.hide(),g.hide(),g.text("下一步")}function n(){d.append('<button id="btn-shortcut-download" class="button shortcut closed"><i class="fa fa-cloud-download"></i></button>');t("#btn-shortcut-download")}function o(){"install"==S&&l.hide(),j=!1,r.html('<i class="fa fa-download"></i>&nbspexe.andyteki'),m.html($),v.html("請選擇版本"),t("#btn-shortcut-download").remove(),l.show(),h.removeClass("closed"),h.addClass("active")}function s(){t(".button-group.bc > button, .button-group.cv > button").click(function(){var a=t(this).attr("id").split("-")[1],i=t(this).attr("id").split("-")[2],n="https://www.dropbox.com/s/ogh8tflpkltxhfm/bc.pdf?raw=1",o="https://www.dropbox.com/s/mftqh8zrjyblm8t/cv.pdf?raw=1",s={success:function(){alert("儲存成功!")}};"open"==a?("card"==i&&e.open(n),"cv"==i&&e.open(o)):"dropbox"==a&&("card"==i&&Dropbox.save(n,"名片",s),"cv"==i&&Dropbox.save(o,"履歷",s))})}function c(t){console.log(t)}var l=(t("#desktop"),t("#draggable-window")),r=l.find(".status-bar > .title"),d=t("#menu-bar"),u=t("#btn-start"),h=t("#btn-shortcut-install"),f=t("#btn-minimize"),p=t("#btn-exit"),b=t("#btn-previous"),g=t("#btn-next"),m=(t("#package-list > .package"),t("#body")),v=t("#draggable-window .tasks > .title"),k=t(".postit");$startPanel=t("#start-panel"),$fbShareLink=t("#fb-share"),$easterLink=t("#easter > a");var w,x,C,y=-1,$=m.html(),L={},S="install",j=!1;l.draggable({containment:"#desktop",scroll:!1,handle:"div.status-bar"}),k.draggable({containment:"#desktop",scroll:!1}),u.click(function(){$startPanel.toggle(),t(this).toggleClass("pressed")}),d.on("click",".button.shortcut",function(){if(S=t(this).attr("id").split("-")[2],j&&"install"==S){var e=confirm("你已成功安裝exe.andyteki，是否重新安裝？");return void(e&&o())}"download"==S&&(r.html('<i class="fa fa-cloud-download"></i>&nbspandyteki'),a(C),s()),l.toggle(),t(this).hasClass("closed")&&t(this).removeClass("closed"),t(this).toggleClass("active")}),f.click(function(){l.hide(),t("#btn-shortcut-"+S).toggleClass("active")}),p.click(function(){if("install"==S){var e=confirm("安裝程式正在進行，確定關閉視窗？");e&&i()}else"download"==S&&(l.hide(),t("#btn-shortcut-"+S).removeClass("active"),t("#btn-shortcut-"+S).addClass("closed"))}),b.click(function(){y>1&&(y--,a(y),g.text("下一步"),1==y&&t(this).hide())}),g.click(function(){if(C-1>y){if(0==y){var e=!!Number(t('input:radio:checked[name="agreement-radio"]').attr("value"));if(!e){var o=prompt("您不同意哪幾個點呢？請填入編號或理由，謝謝！");c(o)}}y++,a(y),y>1&&b.show(),y==C-1&&t(this).text("完成")}else{var s=t("#execution-andyteki").prop("checked");n(),i(),j=!0,s&&t("#btn-shortcut-download").trigger("click")}}),m.on("click","#package-list > .package",function(){var e=t(this).attr("id").replace(/\w+-/,"");"custom"!=e&&(m.html("<h1>Loading...</h1>"),t.ajax({url:"/process",type:"POST",data:{"package":e},success:function(t){y++,w=t;for(var e in w)L[e]=w[e].match(/^<!-{2}\s*(\S+)\s*-{2}>/)[1];C=Object.keys(w).length-1,x=w[C],a(y),g.show()},error:function(){}}))}),$fbShareLink.click(function(t){t.preventDefault(),FB.ui({method:"share",href:e.location.href},function(){})}),$easterLink.tooltip()}function i(){t("#btn-next-card").click(function(e){e.preventDefault();var a=t("#working-experience > .hand-with-card > img"),i=a.attr("src"),n=i.match(/(\d).png$/)[1];3>n?n++:n=1,a.addClass("take"),setTimeout(function(){a.attr("src",i.replace(/\d/,n)).load(function(){a.removeClass("take")})},1e3)})}function n(){jQuery("#skills > .skill").accordion({header:".title",collapsible:!0,active:!1,icons:{header:"ui-icon-plus",activeHeader:"ui-icon-minus"},heightStyle:"content"})}function o(){var e=t("#languages > .overlay");t(".language > img").hover(function(){var a=t(this).siblings(".info").text();e.html(a),e.removeClass("hide")},function(){e.addClass("hide")})}return t(document).ready(a),{initializeExperience:i,initializeSkills:n,initializeLanguage:o}}(jQuery,window);